{% extends 'base.html' %}
{% block content %}
{% load widget_tweaks %}
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Add or Remove Input Fields Dynamically using jQuery - MyNotePaper</title>

    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <script src="//ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.7/css/select2.min.css" rel="stylesheet" />

    <script src="https://code.jquery.com/jquery-3.4.1.js" integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.7/js/select2.min.js"></script>
</head>
<body>
    <div class="container"style="max-width: 700px;">

        <div class="text-center" style="margin: 20px 0px 20px 0px;">
            <a href="https://shouts.dev/" target="_blank"><img src="https://i.imgur.com/hHZjfUq.png"></a><br>
            <span class="text-secondary">Add or Remove Input Fields Dynamically using jQuery</span>
        </div>

        <form method="post" action="" enctype="multipart/form-data">
        {% csrf_token %}
        
        {{ form }}
            <div class="input_fields_wrap">
                <button class="add_field_button">Add More Fields</button>
                <div>
                    <select id="id_isikontrak" name="id_isikontrak" required id="id_id_isikontrak">
                    {% for row in rows %}
                
                    <option id="{{ row.id }}" value="{{ row.id }}">{{ row.nama_barang }}</option>
                    {% endfor %}
                    </select>
                    <input type="text" name="jumlah"/>
                    <input type="text" name="nomor_dos"/>
                </div>
            </div>
        <button type="submit">Submit</button>
        </form>
    </div>

    <script type="text/javascript">
        // add row
       $(document).ready(function() {
	var max_fields      = 10; //maximum input boxes allowed
	var wrapper   		= $(".input_fields_wrap"); //Fields wrapper
	var add_button      = $(".add_field_button"); //Add button ID
	
	var x = 1; //initlal text box count
	$(add_button).click(function(e){ //on add input button click
		e.preventDefault();
		if(x < max_fields){ //max input box allowed
			x++; //text box increment
			$(wrapper).append('<div><select id="id_isikontrak" name="id_isikontrak" required id="id_id_isikontrak">{% for row in rows %} <option id="{{ row.id }}" value="{{ row.id }}">{{ row.nama_barang }}</option> {% endfor %} </select><input type="text" name="jumlah"/><input type="text" name="nomor_dos"/><a href="#" class="remove_field">Remove</a></div>'); //add input box
		}
	});
	
	$(wrapper).on("click",".remove_field", function(e){ //user click on remove text
		e.preventDefault(); $(this).parent('div').remove(); x--;
	})
});
    </script>

    
    <script type="text/javascript">
        // select
    $(document).ready(function() {
     $('#id_isikontrak').select2({
      placeholder: 'Pilih barang',
      allowClear: true
     });
 });
</script>
</body>

{% endblock %}